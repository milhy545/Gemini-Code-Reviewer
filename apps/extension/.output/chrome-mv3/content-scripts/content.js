var content=(function(){"use strict";var ae=Object.defineProperty;var oe=(E,p,b)=>p in E?ae(E,p,{enumerable:!0,configurable:!0,writable:!0,value:b}):E[p]=b;var v=(E,p,b)=>oe(E,typeof p!="symbol"?p+"":p,b);function E(i){return i}function p(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var b={exports:{}},D=b.exports,q;function H(){return q||(q=1,(function(i,s){(function(e,r){r(i)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:D,function(e){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const r="The message port closed before a response was received.",o=l=>{const u={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(u).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class w extends WeakMap{constructor(n,g=void 0){super(g),this.createItem=n}get(n){return this.has(n)||this.set(n,this.createItem(n)),super.get(n)}}const re=t=>t&&typeof t=="object"&&typeof t.then=="function",O=(t,n)=>(...g)=>{l.runtime.lastError?t.reject(new Error(l.runtime.lastError.message)):n.singleCallbackArg||g.length<=1&&n.singleCallbackArg!==!1?t.resolve(g[0]):t.resolve(g)},_=t=>t==1?"argument":"arguments",se=(t,n)=>function(m,...A){if(A.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${_(n.minArgs)} for ${t}(), got ${A.length}`);if(A.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${_(n.maxArgs)} for ${t}(), got ${A.length}`);return new Promise((d,x)=>{if(n.fallbackToNoCallback)try{m[t](...A,O({resolve:d,reject:x},n))}catch(a){console.warn(`${t} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,a),m[t](...A),n.fallbackToNoCallback=!1,n.noCallback=!0,d()}else n.noCallback?(m[t](...A),d()):m[t](...A,O({resolve:d,reject:x},n))})},B=(t,n,g)=>new Proxy(n,{apply(m,A,d){return g.call(A,t,...d)}});let N=Function.call.bind(Object.prototype.hasOwnProperty);const I=(t,n={},g={})=>{let m=Object.create(null),A={has(x,a){return a in t||a in m},get(x,a,h){if(a in m)return m[a];if(!(a in t))return;let c=t[a];if(typeof c=="function")if(typeof n[a]=="function")c=B(t,t[a],n[a]);else if(N(g,a)){let S=se(a,g[a]);c=B(t,t[a],S)}else c=c.bind(t);else if(typeof c=="object"&&c!==null&&(N(n,a)||N(g,a)))c=I(c,n[a],g[a]);else if(N(g,"*"))c=I(c,n[a],g["*"]);else return Object.defineProperty(m,a,{configurable:!0,enumerable:!0,get(){return t[a]},set(S){t[a]=S}}),c;return m[a]=c,c},set(x,a,h,c){return a in m?m[a]=h:t[a]=h,!0},defineProperty(x,a,h){return Reflect.defineProperty(m,a,h)},deleteProperty(x,a){return Reflect.deleteProperty(m,a)}},d=Object.create(t);return new Proxy(d,A)},L=t=>({addListener(n,g,...m){n.addListener(t.get(g),...m)},hasListener(n,g){return n.hasListener(t.get(g))},removeListener(n,g){n.removeListener(t.get(g))}}),te=new w(t=>typeof t!="function"?t:function(g){const m=I(g,{},{getContent:{minArgs:0,maxArgs:0}});t(m)}),U=new w(t=>typeof t!="function"?t:function(g,m,A){let d=!1,x,a=new Promise(C=>{x=function(f){d=!0,C(f)}}),h;try{h=t(g,m,x)}catch(C){h=Promise.reject(C)}const c=h!==!0&&re(h);if(h!==!0&&!c&&!d)return!1;const S=C=>{C.then(f=>{A(f)},f=>{let j;f&&(f instanceof Error||typeof f.message=="string")?j=f.message:j="An unexpected error occurred",A({__mozWebExtensionPolyfillReject__:!0,message:j})}).catch(f=>{console.error("Failed to send onMessage rejected reply",f)})};return S(c?h:a),!0}),ne=({reject:t,resolve:n},g)=>{l.runtime.lastError?l.runtime.lastError.message===r?n():t(new Error(l.runtime.lastError.message)):g&&g.__mozWebExtensionPolyfillReject__?t(new Error(g.message)):n(g)},W=(t,n,g,...m)=>{if(m.length<n.minArgs)throw new Error(`Expected at least ${n.minArgs} ${_(n.minArgs)} for ${t}(), got ${m.length}`);if(m.length>n.maxArgs)throw new Error(`Expected at most ${n.maxArgs} ${_(n.maxArgs)} for ${t}(), got ${m.length}`);return new Promise((A,d)=>{const x=ne.bind(null,{resolve:A,reject:d});m.push(x),g.sendMessage(...m)})},ie={devtools:{network:{onRequestFinished:L(te)}},runtime:{onMessage:L(U),onMessageExternal:L(U),sendMessage:W.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:W.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},K={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return u.privacy={network:{"*":K},services:{"*":K},websites:{"*":K}},I(l,ie,u)};e.exports=o(chrome)}})})(b)),b.exports}var V=H();const y=p(V),G={matches:["<all_urls>"],main(){console.log("Gemini Code Reviewer content script loaded"),y.runtime.onMessage.addListener((e,r,o)=>{var l;if(e.type==="GET_SELECTION"){const u=((l=window.getSelection())==null?void 0:l.toString())||"";o({text:u})}return!0}),document.querySelectorAll("pre code, .highlight, .code-block").forEach(e=>{if(e.parentElement&&!e.parentElement.querySelector(".gemini-review-btn")){const r=document.createElement("button");r.className="gemini-review-btn",r.textContent="✨ Review with Gemini",r.style.cssText=`
          position: absolute;
          top: 8px;
          right: 8px;
          padding: 6px 12px;
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          border-radius: 6px;
          font-size: 12px;
          font-weight: 600;
          cursor: pointer;
          z-index: 1000;
          box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
          transition: all 0.2s;
        `,r.onmouseover=()=>{r.style.transform="scale(1.05)",r.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.6)"},r.onmouseout=()=>{r.style.transform="scale(1)",r.style.boxShadow="0 2px 8px rgba(102, 126, 234, 0.4)"},r.onclick=()=>{const o=e.textContent||"";y.runtime.sendMessage({type:"REVIEW_CODE",code:o,language:s(e)}),y.sidePanel.open({})},e.parentElement.style.position!=="absolute"&&(e.parentElement.style.position="relative"),e.parentElement.appendChild(r)}});function s(e){const r=e.className,o={javascript:"javascript",typescript:"typescript",python:"python",java:"java",go:"go",rust:"rust",php:"php",ruby:"ruby",csharp:"csharp",cpp:"cpp"};for(const[l,u]of Object.entries(o))if(r.includes(l)||r.includes(`language-${l}`))return u;return"javascript"}window.location.hostname==="github.com"&&z()}};function z(){new MutationObserver(()=>{document.querySelectorAll(".file-header").forEach(e=>{if(!e.querySelector(".gemini-pr-review-btn")){const r=document.createElement("button");r.className="gemini-pr-review-btn btn btn-sm",r.innerHTML="✨ Review with Gemini",r.style.cssText=`
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          color: white;
          border: none;
          margin-left: 8px;
          font-weight: 600;
        `,r.onclick=()=>{var u;const l=(u=e.closest(".file"))==null?void 0:u.querySelector(".blob-code");if(l){const w=l.textContent||"";y.runtime.sendMessage({type:"REVIEW_CODE",code:w,language:"javascript"}),y.sidePanel.open({})}};const o=e.querySelector(".file-actions");o&&o.appendChild(r)}})}).observe(document.body,{childList:!0,subtree:!0})}function k(i,...s){}const Z={debug:(...i)=>k(console.debug,...i),log:(...i)=>k(console.log,...i),warn:(...i)=>k(console.warn,...i),error:(...i)=>k(console.error,...i)},M=class M extends Event{constructor(s,e){super(M.EVENT_NAME,{}),this.newUrl=s,this.oldUrl=e}};v(M,"EVENT_NAME",F("wxt:locationchange"));let R=M;function F(i){var s;return`${(s=y==null?void 0:y.runtime)==null?void 0:s.id}:content:${i}`}function Y(i){let s,e;return{run(){s==null&&(e=new URL(location.href),s=i.setInterval(()=>{let r=new URL(location.href);r.href!==e.href&&(window.dispatchEvent(new R(r,e)),e=r)},1e3))}}}const T=class T{constructor(s,e){v(this,"isTopFrame",window.self===window.top);v(this,"abortController");v(this,"locationWatcher",Y(this));v(this,"receivedMessageIds",new Set);this.contentScriptName=s,this.options=e,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(s){return this.abortController.abort(s)}get isInvalid(){return y.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(s){return this.signal.addEventListener("abort",s),()=>this.signal.removeEventListener("abort",s)}block(){return new Promise(()=>{})}setInterval(s,e){const r=setInterval(()=>{this.isValid&&s()},e);return this.onInvalidated(()=>clearInterval(r)),r}setTimeout(s,e){const r=setTimeout(()=>{this.isValid&&s()},e);return this.onInvalidated(()=>clearTimeout(r)),r}requestAnimationFrame(s){const e=requestAnimationFrame((...r)=>{this.isValid&&s(...r)});return this.onInvalidated(()=>cancelAnimationFrame(e)),e}requestIdleCallback(s,e){const r=requestIdleCallback((...o)=>{this.signal.aborted||s(...o)},e);return this.onInvalidated(()=>cancelIdleCallback(r)),r}addEventListener(s,e,r,o){var l;e==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(l=s.addEventListener)==null||l.call(s,e.startsWith("wxt:")?F(e):e,r,{...o,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),Z.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:T.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(s){var l,u,w;const e=((l=s.data)==null?void 0:l.type)===T.SCRIPT_STARTED_MESSAGE_TYPE,r=((u=s.data)==null?void 0:u.contentScriptName)===this.contentScriptName,o=!this.receivedMessageIds.has((w=s.data)==null?void 0:w.messageId);return e&&r&&o}listenForNewerScripts(s){let e=!0;const r=o=>{if(this.verifyScriptStartedEvent(o)){this.receivedMessageIds.add(o.data.messageId);const l=e;if(e=!1,l&&(s!=null&&s.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",r),this.onInvalidated(()=>removeEventListener("message",r))}};v(T,"SCRIPT_STARTED_MESSAGE_TYPE",F("wxt:content-script-started"));let $=T;const J=Symbol("null");let Q=0;class X extends Map{constructor(){super(),this._objectHashes=new WeakMap,this._symbolHashes=new Map,this._publicKeys=new Map;const[s]=arguments;if(s!=null){if(typeof s[Symbol.iterator]!="function")throw new TypeError(typeof s+" is not iterable (cannot read property Symbol(Symbol.iterator))");for(const[e,r]of s)this.set(e,r)}}_getPublicKeys(s,e=!1){if(!Array.isArray(s))throw new TypeError("The keys parameter must be an array");const r=this._getPrivateKey(s,e);let o;return r&&this._publicKeys.has(r)?o=this._publicKeys.get(r):e&&(o=[...s],this._publicKeys.set(r,o)),{privateKey:r,publicKey:o}}_getPrivateKey(s,e=!1){const r=[];for(let o of s){o===null&&(o=J);const l=typeof o=="object"||typeof o=="function"?"_objectHashes":typeof o=="symbol"?"_symbolHashes":!1;if(!l)r.push(o);else if(this[l].has(o))r.push(this[l].get(o));else if(e){const u=`@@mkm-ref-${Q++}@@`;this[l].set(o,u),r.push(u)}else return!1}return JSON.stringify(r)}set(s,e){const{publicKey:r}=this._getPublicKeys(s,!0);return super.set(r,e)}get(s){const{publicKey:e}=this._getPublicKeys(s);return super.get(e)}has(s){const{publicKey:e}=this._getPublicKeys(s);return super.has(e)}delete(s){const{publicKey:e,privateKey:r}=this._getPublicKeys(s);return!!(e&&super.delete(e)&&this._publicKeys.delete(r))}clear(){super.clear(),this._symbolHashes.clear(),this._publicKeys.clear()}get[Symbol.toStringTag](){return"ManyKeysMap"}get size(){return super.size}}new X;function le(){}function P(i,...s){}const ee={debug:(...i)=>P(console.debug,...i),log:(...i)=>P(console.log,...i),warn:(...i)=>P(console.warn,...i),error:(...i)=>P(console.error,...i)};return(async()=>{try{const{main:i,...s}=G,e=new $("content",s);return await i(e)}catch(i){throw ee.error('The content script "content" crashed on startup!',i),i}})()})();
content;
